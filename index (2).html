<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Konverter Cent (USD) → Rupiah (IDR)</title>
  <style>
    /* FIX utama: biar input tidak "melebar" keluar card */
    *, *::before, *::after { box-sizing: border-box; }

    :root { color-scheme: light; }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:#f2f4f8;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      margin:0;
      padding:24px;
    }
    .box{
      background:#fff;
      padding:26px 22px;
      border-radius:18px;
      width:min(420px, 92vw);
      box-shadow:0 10px 30px rgba(0,0,0,.12);
      text-align:center;
    }
    h1{
      font-size:20px;
      margin:0 0 16px;
      line-height:1.3;
    }

    .field{
      text-align:left;
      margin:12px 0;
    }
    label{
      display:block;
      font-size:13px;
      color:#444;
      margin:0 0 6px;
      font-weight:600;
    }
    input{
      width:100%;
      padding:12px 14px;
      border-radius:12px;
      border:1px solid #d7dbe2;
      font-size:16px;
      outline:none;
      background:#fff;
    }
    input:focus{
      border-color:#0b5fff;
      box-shadow:0 0 0 3px rgba(11,95,255,.12);
    }

    .btnrow{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:14px;
    }
    button{
      padding:10px 14px;
      border:none;
      border-radius:12px;
      background:#0b5fff;
      color:#fff;
      font-size:15px;
      cursor:pointer;
      min-width:130px;
    }
    button.secondary{ background:#1463ff; }
    button:hover{ filter:brightness(.95); }

    .hasil{
      margin-top:18px;
      font-size:20px;
      font-weight:800;
      color:#0a7a2f;
      min-height:26px;
    }
    .status{
      margin-top:8px;
      font-size:12px;
      color:#555;
      min-height:16px;
    }
    .note{
      margin-top:12px;
      font-size:12px;
      color:#777;
    }
    .small{
      font-size:12px;
      color:#666;
      margin-top:6px;
    }

    /* Responsif: buat layar kecil */
    @media (max-width: 380px){
      .box{ padding:22px 16px; }
      button{ min-width: 0; width:100%; }
      .btnrow{ gap:8px; }
    }
  </style>
</head>
<body>
  <div class="box">
    <h1>Konverter Cent (USD) → Rupiah (IDR)</h1>

    <div class="field">
      <label for="cent">Jumlah (cent)</label>
      <input type="number" id="cent" placeholder="contoh: 250" min="0" step="1" />
    </div>

    <div class="field">
      <label for="kurs">Kurs USD → IDR</label>
      <input type="number" id="kurs" placeholder="otomatis (klik Refresh)" min="0" step="0.01" />
    </div>

    <div class="btnrow">
      <button id="btnKonversi">Konversi</button>
      <button class="secondary" id="btnRefresh">Refresh Kurs</button>
    </div>

    <div class="hasil" id="output">Hasil akan muncul di sini</div>
    <div class="status" id="status"></div>

    <div class="note">Rumus: (cent ÷ 100) × kurs</div>
    <div class="small">Sumber kurs: Frankfurter API (tanpa API key)</div>
  </div>

  <script>
    const centEl = document.getElementById("cent");
    const kursEl = document.getElementById("kurs");
    const outEl  = document.getElementById("output");
    const stEl   = document.getElementById("status");
    const btnK   = document.getElementById("btnKonversi");
    const btnR   = document.getElementById("btnRefresh");

    function formatIDR(n){
      return new Intl.NumberFormat("id-ID", { style:"currency", currency:"IDR" }).format(n);
    }

    async function loadRate(){
      stEl.textContent = "Mengambil kurs USD→IDR...";
      try{
        const res = await fetch("https://api.frankfurter.app/latest?from=USD&to=IDR", { cache: "no-store" });
        if(!res.ok) throw new Error("HTTP " + res.status);
        const data = await res.json();
        const rate = data?.rates?.IDR;
        if(!rate) throw new Error("rate missing");
        kursEl.value = Number(rate).toFixed(2);
        stEl.textContent = "Kurs berhasil diperbarui ✅";
      }catch(e){
        stEl.textContent = "Gagal ambil kurs otomatis. Isi kurs manual ya.";
      }
    }

    function convert(){
      const cent = Number(centEl.value);
      const kurs = Number(kursEl.value);

      if(!Number.isFinite(cent) || cent < 0){
        outEl.textContent = "Cent tidak valid.";
        return;
      }
      if(!Number.isFinite(kurs) || kurs <= 0){
        outEl.textContent = "Kurs tidak valid (coba refresh atau isi manual).";
        return;
      }

      const idr = (cent / 100) * kurs;
      outEl.textContent = formatIDR(idr);
    }

    btnK.addEventListener("click", convert);
    btnR.addEventListener("click", loadRate);

    // Auto refresh kurs saat halaman dibuka
    loadRate();
  </script>
</body>
</html>
